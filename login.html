<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Login - CRUDZASO</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

  <style>
    body { background: #f5f7fb; }
    .auth-card 
    { width: 380px; 
     border-radius: 10px;
      box-shadow: 0 12px 30px rgba(2,6,23,0.08); 
    }
    .brand { 
        display:flex; 
        align-items:center; 
        gap:10px; 
        font-weight:700; 
    }
    .brand .logo 
    { width:36px; 
    height:36px; 
    border-radius:6px; 
    background:#2563eb; 
    display:inline-block; 
}


  </style>
</head>

<body class="d-flex justify-content-center align-items-center vh-100">

    
  <div class="card auth-card">
    <div class="card-body p-5">
      <div class="text-center mb-5">
        <div class="brand justify-content-center mb-3">
          <span class=""></span>
          CRUDZASO
        </div>
        <h4 class="mb-1">Welcome back</h4>
        <div class="text-muted small">Enter your credentials to access the platform</div>
      </div>

      <div class="mt-4">
        <input id="email" class="form-control mb-3" placeholder="Email or username">
        <input id="password" type="password" class="form-control mb-2" placeholder="Password">

        <div class="text-end mb-3">
          <a href="#" class="small">Forgot password?</a>
        </div>

        <button id="btnLogin" class="btn btn-primary w-100">Sign in</button>

        <!-- enlace para registrar-->
        <p class="text-center mt-3 small">
          Don't have an account? <a href="register.html">Register</a>
        </p>
      </div>
    </div>
  </div>





  <script>
    
const API_URL = "http://localhost:3000";

// validacion que se complete la informacion
document.getElementById("btnLogin").addEventListener("click", async () => {
  const email = document.getElementById("email").value.trim();
  const password = document.getElementById("password").value.trim();
  if (!email || !password) return alert("Complete all the sections");


  //validar el inicio de seccion
  try {
    const qs = `?email=${encodeURIComponent(email)}&password=${encodeURIComponent(password)}`;
    const res = await fetch(`${API_URL}/users${qs}`);
    const users = await res.json();

    if (!users || users.length === 0) {
      alert("Email or password invalid");
      return;
    }

    const user = users[0];
    localStorage.setItem("loggedUser", JSON.stringify(user));
    window.location.href = "dashboard.html";
  } catch (err) {
    alert("Error conectando con la API.");
    console.error(err);
  }
});
</script>

</body>
</html>
